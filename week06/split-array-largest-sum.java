package Algorithm.leetcode.leetcode.editor.cn;
//ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„å’Œä¸€ä¸ªæ•´æ•° mï¼Œä½ éœ€è¦å°†è¿™ä¸ªæ•°ç»„åˆ†æˆ m ä¸ªéç©ºçš„è¿ç»­å­æ•°ç»„ã€‚è®¾è®¡ä¸€ä¸ªç®—æ³•ä½¿å¾—è¿™ m ä¸ªå­æ•°ç»„å„è‡ªå’Œçš„æœ€å¤§å€¼æœ€å°ã€‚
//
// æ³¨æ„: 
//æ•°ç»„é•¿åº¦ n æ»¡è¶³ä»¥ä¸‹æ¡ä»¶: 
//
// 
// 1 â‰¤ n â‰¤ 1000 
// 1 â‰¤ m â‰¤ min(50, n) 
// 
//
// ç¤ºä¾‹: 
//
// 
//è¾“å…¥:
//nums = [7,2,5,10,8]
//m = 2
//
//è¾“å‡º:
//18
//
//è§£é‡Š:
//ä¸€å…±æœ‰å››ç§æ–¹æ³•å°†numsåˆ†å‰²ä¸º2ä¸ªå­æ•°ç»„ã€‚
//å…¶ä¸­æœ€å¥½çš„æ–¹å¼æ˜¯å°†å…¶åˆ†ä¸º[7,2,5] å’Œ [10,8]ï¼Œ
//å› ä¸ºæ­¤æ—¶è¿™ä¸¤ä¸ªå­æ•°ç»„å„è‡ªçš„å’Œçš„æœ€å¤§å€¼ä¸º18ï¼Œåœ¨æ‰€æœ‰æƒ…å†µä¸­æœ€å°ã€‚
// 
// Related Topics äºŒåˆ†æŸ¥æ‰¾ åŠ¨æ€è§„åˆ’ 
// ğŸ‘ 382 ğŸ‘ 0


import java.util.Arrays;

//leetcode submit region begin(Prohibit modification and deletion)
class Solution {
    // é¢˜ç›®é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/split-array-largest-sum/
    public int splitArray(int[] nums, int m) {
        // æ—¶é—´å¤æ‚åº¦ï¼šO(N^2 * M)ï¼Œ3å±‚forå¾ªç¯
        // ç©ºé—´å¤æ‚åº¦ï¼šO(N^2),äºŒç»´dpæ•°ç»„
        return func1(nums, m);
    }

    private int func1(int[] nums, int m) {
        // 1ï¼šæ‰¾é‡å¤æ€§
        // 2. å®šä¹‰çŠ¶æ€æ•°ç»„ï¼šf[i][j],è¡¨ç¤ºå°†æ•°ç»„çš„å‰iä¸ªæ•°åˆ†å‰²ä¸ºjæ®µæ‰€èƒ½å¤Ÿå¾—åˆ°çš„æœ€å¤§è¿ç»­å­æ•°ç»„å’Œçš„æœ€å°å€¼
        // 3. DPæ–¹ç¨‹ï¼šf[i][j] = min{max{f[k][j-1], sub[k+1][i]}},0<=k<=i-1

        // å¾—åˆ°æ•°ç»„çš„é•¿åº¦
        int len = nums.length;
        // å®šä¹‰ä¸€ä¸ªå‰ç¼€å’Œï¼ŒpreSum[i]=sum[0...i)
        int[] preSum = new int[len + 1];
        // åˆå§‹åŒ–å‰ç¼€å’Œæ•°ç»„
        preSum[0] = 0;
        for (int i = 0; i < len; i++) {
            preSum[i + 1] = preSum[i] + nums[i];
        }

        // ç”³è¯·dpæ•°ç»„
        int[][] dp = new int[len][m + 1];
        // åˆå§‹åŒ–dpæ•°ç»„ï¼Œå› ä¸ºè¦æ‰¾æœ€å°å€¼ï¼Œæ‰€ä»¥åˆå€¼èµ‹å€¼ä¸€ä¸ªå¾ˆå¤§çš„å€¼å³å¯
        for (int i = 0; i < len; i++) {
            Arrays.fill(dp[i], Integer.MAX_VALUE);
        }

        // åˆ†å‰²æ•°ä¸º1çš„æƒ…å†µï¼Œå³ä¸åˆ†å‰²çš„æƒ…å†µï¼Œæ‰€æœ‰çš„å‰ç¼€å’Œå°±æ˜¯ä¾æ¬¡çš„çŠ¶æ€å€¼
        for (int i = 0; i < len; i++) {
            dp[i][1] = preSum[i + 1];
        }

        // ä»åˆ†å‰²æ•°ä¸º2å¼€å§‹é€’æ¨
        for (int k = 2; k <= m; k++) {
            // iæ˜¯ä¸ºäº†å›ºå®šæœ‰å¤šå°‘ä¸ªæ•°å­—å‚ä¸è¿™ä»¶äº‹æƒ…ï¼Œå±‚å±‚ç½‘ä¸Šç´¯ã€‚åˆ†å‰²æˆkæ®µï¼Œè‡³å°‘è¦æœ‰kä¸ªå…ƒç´ å§ã€‚è€Œiçš„ä¸‹æ ‡ä»0å¼€å§‹ï¼Œ
            // 0å°±æ˜¯è¡¨ç¤ºæœ‰ä¸€ä¸ªå…ƒç´ çš„æƒ…å†µï¼Œ1å½“ç„¶å°±æ˜¯ä»£è¡¨å³ä¸¤ä¸ªå…ƒç´ çš„æƒ…å†µ
            for (int i = k - 1; i < len; i++) {
                // jè¡¨ç¤ºç¬¬k - 1ä¸ªåŒºé—´çš„æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡ï¼Œæœ€å°å€¼æ˜¯k-2ï¼Œå› ä¸ºæç«¯æœ€å°å°±æ˜¯è®©å‰é¢çš„æ¯ä¸€ä¸ªæ•°ç»„å ä¸€æ®µã€‚æœ€å¤§å€¼æ˜¯len - 2,å› ä¸ºæœ€åä¸€ä¸ªä½ç½®len-1æç«¯æƒ…å†µä½ å°±è®©ä»–ä½œä¸ºç¬¬kæ®µã€‚å‰é¢çš„æ‰€æœ‰ä¸ºk - 1æ®µã€‚
                // æ¯”å¦‚ï¼Œk=2æ—¶ï¼Œç¬¬k-1ï¼ˆç¬¬1ä¸ªï¼‰ä¸ªåŒºé—´çš„æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡æ˜¯0ï¼Œk = 3æ—¶ï¼Œç¬¬k-1ä¸ªï¼ˆç¬¬2ï¼‰ä¸ªåŒºé—´çš„æœ€åä¸€ä¸ªå…ƒç´ æ˜¯1ï¼Œä¹Ÿå°±æ˜¯nums[0],nums[1]åˆ†åˆ«ä¸ºä¸¤æ®µ
                for (int j = k - 2; j < i; j++) {
                    dp[i][k] = Math.min(dp[i][k], Math.max(dp[j][k - 1], preSum[i + 1] - preSum[j + 1]));
                }
            }
        }

        return dp[len - 1][m];
    }
}
//leetcode submit region end(Prohibit modification and deletion)
